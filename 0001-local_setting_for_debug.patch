From 05ed6779fcd5db558f281ca39dcd58f5b1ba69c2 Mon Sep 17 00:00:00 2001
From: jingzhao <jingzhao@jingzhaodeMacBook-Pro.local>
Date: Mon, 11 May 2020 09:56:29 +0800
Subject: [PATCH] local_setting_for_debug

---
 consul/config.json                        |  2 +-
 consul/registration.js                    |  2 +-
 src/main/resources/application.properties | 12 ++++++++----
 src/main/resources/logback.xml            |  2 +-
 4 files changed, 11 insertions(+), 7 deletions(-)

diff --git a/consul/config.json b/consul/config.json
index de4826f..b1cc5f6 100644
--- a/consul/config.json
+++ b/consul/config.json
@@ -1,7 +1,7 @@
 {
   "service": {
     "Name": "siglusintegration",
-    "Port": 8080,
+    "Port": 8090,
     "Tags": ["openlmis-service"],
     "check": {
       "interval": "10s",
diff --git a/consul/registration.js b/consul/registration.js
index 395caeb..55dfbb1 100644
--- a/consul/registration.js
+++ b/consul/registration.js
@@ -386,7 +386,7 @@ function CommandLineResolver() {
     return false;
   }
 
-  var consulHost = process.env.CONSUL_HOST || 'consul';
+  var consulHost = process.env.CONSUL_HOST || 'localhost';
   var consulPort = process.env.CONSUL_PORT || '8500';
 
   if (!awaitConsul(consulHost, consulPort)) {
diff --git a/src/main/resources/application.properties b/src/main/resources/application.properties
index 60e9003..1098219 100644
--- a/src/main/resources/application.properties
+++ b/src/main/resources/application.properties
@@ -8,9 +8,9 @@ spring.application.name=siglusintegration
 spring.data.rest.base-path=/api
 spring.data.rest.maxPageSize=2147483647
 
-spring.datasource.url=${DATABASE_URL}?stringtype=unspecified
-spring.datasource.username=${POSTGRES_USER}
-spring.datasource.password=${POSTGRES_PASSWORD}
+spring.datasource.url=jdbc:postgresql://localhost:5432/open_lmis?stringtype=unspecified
+spring.datasource.username=postgres
+spring.datasource.password=p@ssw0rd
 spring.datasource.driver-class-name=org.postgresql.Driver
 
 spring.datasource.tomcat.max-active=${DB_MAX_ACTIVE:20}
@@ -50,9 +50,11 @@ decimalSeparator=${DECIMAL_SEPARATOR:.}
 dateFormat=${DATE_FORMAT:dd/MM/yyyy}
 dateTimeFormat=${DATE_TIME_FORMAT:dd/MM/yyyy HH:mm:ss}
 
+BASE_URL=http://localhost
+
 service.url=${BASE_URL}
 
-redis.url=${REDIS_URL:redis}
+redis.url=${REDIS_URL:localhost}
 redis.port=${REDIS_PORT:6379}
 redis.password=${REDIS_PASSWORD:}
 
@@ -81,3 +83,5 @@ email.urlToInitiateRequisition=${publicUrl}/#!/requisitions/initiate?facility={0
 request.maxUrlLength=2000
 
 stockmanagement.kit.unpack.reasonId = ${KIT_UNPACK_REASON_ID:9b4b653a-f319-4a1b-bb80-8d6b4dd6cc12}
+
+server.port=8090
\ No newline at end of file
diff --git a/src/main/resources/logback.xml b/src/main/resources/logback.xml
index 8a9e482..30a43d4 100644
--- a/src/main/resources/logback.xml
+++ b/src/main/resources/logback.xml
@@ -2,7 +2,7 @@
     <include resource="org/springframework/boot/logging/logback/base.xml" />
 
     <appender name="SYSLOG" class="ch.qos.logback.classic.net.SyslogAppender">
-        <syslogHost>${log.host:-log}</syslogHost>
+        <syslogHost>${log.host:-localhost}</syslogHost>
         <port>${log.port:-514}</port>
         <facility>LOCAL0</facility>
         <suffixPattern>[%15.15thread] %level %logger %msg</suffixPattern>
-- 
2.21.1 (Apple Git-122.3)

